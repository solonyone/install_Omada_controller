##install Omada Software Controller V4
##get latest version url: https://www.tp-link.com/pl/support/download/omada-software-controller/ and change OMADAURL variable

sudo su -
apt update -y && apt full-upgrade -y && apt autoremove -y && apt clean -y && apt autoclean -y
apt-get install jsvc openjdk-8-jdk curl net-tools -y
sudo update-alternatives --config java
cd /usr/lib/jvm
ln -s java-8-openjdk-armhf default-java
OMADAURL=https://static.tp-link.com/software/2021/202107/20210701/Omada_SDN_Controller_v4.4.3_linux_x64.tar.gz
wget $OMADAURL
cd /tmp
mkdir /tmp/Omada_SDN_Controller
tar zxvf ${OMADAURL##*/} -C /tmp/Omada_SDN_Controller
/tmp/Omada_SDN_Controller/install.sh -y
rm -rf /tmp/Omada_SDN_Controller
rm ${OMADAURL##*/}



##upgrade Omada Software Controller v4
##get latest version url: https://www.tp-link.com/pl/support/download/omada-software-controller/ and change OMADAURL variable
## before procedure backup the configuration from GUI

sudo su -
apt update -y && apt full-upgrade -y && apt autoremove -y && apt clean -y && apt autoclean -y
cd /tmp
OMADAURL=https://static.tp-link.com/software/2021/202107/20210701/Omada_SDN_Controller_v4.4.3_linux_x64.tar.gz
wget $OMADAURL
mkdir /tmp/Omada_SDN_Controller
tar zxvf ${OMADAURL##*/} -C /tmp/Omada_SDN_Controller
/tmp/Omada_SDN_Controller/install.sh -y
# type y to approve upgrade
rm -rf /tmp/Omada_SDN_Controller
rm ${OMADAURL##*/}
